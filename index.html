<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Judge Scoring</title>

<style>
body {
  font-family: Arial;
  text-align: center;
  background: #f5f5f5;
  padding: 20px;
}

h2 { margin-bottom: 10px; }

.score-display {
  font-size: 60px;
  font-weight: bold;
  margin: 20px 0;
}

.slider-container {
  height: 300px;
  display: flex;
  justify-content: center;
  align-items: center;
}

input[type=range] {
  writing-mode: bt-lr;
  -webkit-appearance: slider-vertical;
  width: 50px;
  height: 300px;
  background: linear-gradient(to top, red, orange, yellow, limegreen);
}

button {
  font-size: 22px;
  padding: 15px 30px;
  margin-top: 20px;
}
</style>
</head>

<body>

<h2>CP Freestyle Judging</h2>

<form id="scoreForm">

<input type="hidden" id="judge" name="entry.759726589">

<label>Competitor Number</label><br>
<input name="entry.1094004330" required><br>

<div class="score-display" id="scoreText">5.0</div>

<div class="slider-container">
  <input type="range" id="slider"
    min="0" max="10" step="0.1" value="5">
</div>

<input type="hidden" id="score" name="entry.1544079831">

<h3>Penalties</h3>

<label><input type="checkbox" name="entry.753299047" value="Missed Entry (ME)"> Missed Entry</label><br>
<label><input type="checkbox" name="entry.753299047" value="Water Landing (WL)"> Water Landing</label><br>
<label><input type="checkbox" name="entry.753299047" value="Move Failure (MF)"> Move Failure</label><br>

<button type="submit">SUBMIT SCORE</button>

</form>

<script>

// Fill judge from URL
const params = new URLSearchParams(window.location.search);
document.getElementById("judge").value = params.get("judge");

// Slider behaviour
const slider = document.getElementById("slider");
const scoreText = document.getElementById("scoreText");
const scoreInput = document.getElementById("score");

function updateScore() {
  let val = parseFloat(slider.value).toFixed(1);
  scoreText.innerText = val;
  scoreInput.value = val;
}

slider.oninput = updateScore;
updateScore();

// Submit to Google Forms
document.getElementById("scoreForm").onsubmit = function(e) {
  e.preventDefault();

  const data = new FormData(this);

  fetch("https://docs.google.com/forms/d/e/1FAIpQLSfb2JIBic9mirDg9_CX80br3jmQ74vaLM3BJITnUDEXfmi0pg/formResponse", {
    method: "POST",
    mode: "no-cors",
    body: data
  });

  alert("Score submitted!");
  this.reset();
};

</script>

</body>
</html>
